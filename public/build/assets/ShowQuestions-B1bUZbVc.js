import{h as U,s as h}from"./moment-BiYybmdS.js";import{s as A}from"./index-QPnfdlOn.js";import{s as E}from"./index-BMU10jgj.js";import{s as M,a as Y}from"./index-Clbj2G5w.js";import{s as F}from"./index-Bq2npM-B.js";import{s as L,a as f}from"./index-Bb_4tGAF.js";import{Q as R,l as r,M as z,c as b,d as l,b as t,f as H,j as u,e as x,t as k,u as I,V as Q,F as W,W as G,o as g}from"./app-DeRpOroz.js";import"./index-DwC4l-jk.js";import"./index-9x5Dav86.js";import"./index-k8S3BKyS.js";const J={key:0,class:"flex flex-col min-h-screen items-center justify-center"},K={class:"flex flex-col gap-4 text-center"},X={key:1,class:"flex flex-col gap-12"},Z={class:"card flex flex-col gap-4"},ee={class:"flex justify-start"},te={key:0},le={class:"mt-4"},oe={class:"flex justify-end gap-2 mt-2"},fe={__name:"ShowQuestions",setup(ae){const _=G(),d=R(),m=r(!0),v=r(!1),s=r({}),C=r([]),V=r(null),p=r(!1),n=r({label:"",value:"",next_question_bot_id:""});function B(){const a={...n.value,question_bot_id:s.value.id};f.post("/api/options",a).then(()=>{d.add({severity:"success",summary:"Sucesso",detail:"Opção adicionada!",life:3e3}),p.value=!1,q(),n.value={label:"",value:"",next_question_bot_id:""}})}function y(){_.back()}const D=()=>{v.value=!1},S=a=>{v.value=!0,V.value=a},q=async()=>{m.value=!0,f.get(`/api/questions/${_.currentRoute.value.params.id}`).then(a=>{s.value=a.data,m.value=!1}).catch(a=>{m.value=!1,d.add({severity:"error",summary:"Erro",detail:"Não foi possível carregar a pergunta",life:3e3}),y()}),f.get("/api/questions").then(a=>{C.value=a.data.data}).catch(a=>{d.add({severity:"error",summary:"Erro",detail:"Não foi possível carregar as perguntas",life:3e3})})},T=()=>{f.delete(`/api/questions/${V.value}`).then(()=>{d.add({severity:"success",summary:"Sucesso",detail:"Pergunta apagada com sucesso",life:3e3}),D(),y()}).catch(a=>{d.add({severity:"error",summary:"Erro",detail:"Erro ao apagar",life:3e3})})};return z(()=>{q()}),(a,e)=>{const N=L,i=F,c=M,O=Y,w=E,P=A,$=h;return g(),b(W,null,[m.value?(g(),b("div",J,[t("div",K,[l(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Carregando"}),e[8]||(e[8]=t("p",null,"Por Favor Aguarde...",-1))])])):(g(),b("div",X,[t("div",Z,[t("div",ee,[l(i,{label:"Voltar",class:"mr-2 mb-2",onClick:y},{default:u(()=>[...e[9]||(e[9]=[t("i",{class:"pi pi-angle-left"},null,-1),x(" Voltar ",-1)])]),_:1})]),e[17]||(e[17]=t("div",{class:"font-semibold text-xl"},"Detalhes da Pergunta",-1)),t("div",null,[e[10]||(e[10]=t("strong",null,"Pergunta:",-1)),x(" "+k(s.value.text),1)]),t("div",null,[e[11]||(e[11]=t("strong",null,"Tipo:",-1)),x(" "+k(s.value.type==="button"?"Botão":"Texto"),1)]),t("div",null,[e[12]||(e[12]=t("strong",null,"Data de Criação:",-1)),x(" "+k(I(U)(s.value.created_at).format("DD-MM-YYYY HH:mm")),1)]),s.value.options&&s.value.options.length?(g(),b("div",te,[e[13]||(e[13]=t("div",{class:"font-semibold mt-4 mb-2"},"Opções",-1)),l(O,{value:s.value.options},{default:u(()=>[l(c,{field:"label",header:"Texto do Botão"}),l(c,{field:"value",header:"Valor"}),l(c,{field:"next_question.text",header:"Próxima Pergunta"}),l(c,{header:"Ações"},{body:u(o=>[l(i,{icon:"pi pi-pencil",onClick:j=>a.editOption(o.data),class:"m-2"},null,8,["onClick"]),l(i,{icon:"pi pi-trash",onClick:j=>a.deleteOption(o.data.id),class:"m-2"},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])):H("",!0),t("div",le,[l(i,{label:"Adicionar opção",onClick:e[0]||(e[0]=o=>p.value=!0)}),l($,{header:"Nova Opção",visible:p.value,"onUpdate:visible":e[5]||(e[5]=o=>p.value=o),modal:!0,style:{width:"400px",borderRadius:"12px"}},{default:u(()=>[t("form",{onSubmit:Q(B,["prevent"]),class:"flex flex-col gap-4 p-2"},[t("div",null,[e[14]||(e[14]=t("label",{for:"label",class:"font-semibold mb-1 block"},"Texto do Botão",-1)),l(w,{modelValue:n.value.label,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.label=o),id:"label",class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[15]||(e[15]=t("label",{for:"value",class:"font-semibold mb-1 block"},"Valor",-1)),l(w,{modelValue:n.value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.value=o),id:"value",class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[16]||(e[16]=t("label",{for:"next_question_bot_id",class:"font-semibold mb-1 block"},"Próxima Pergunta",-1)),l(P,{modelValue:n.value.next_question_bot_id,"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.next_question_bot_id=o),id:"next_question_bot_id",options:C.value,optionLabel:"text",optionValue:"id",filter:"",placeholder:"Selecione a próxima pergunta",class:"w-full",showClear:""},null,8,["modelValue","options"])]),t("div",oe,[l(i,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:e[4]||(e[4]=o=>p.value=!1)}),l(i,{label:"Salvar",type:"submit",icon:"pi pi-check",severity:"success"})])],32)]),_:1},8,["visible"])]),t("div",null,[l(i,{label:"Apagar",icon:"pi pi-trash",severity:"danger",onClick:e[6]||(e[6]=o=>S(s.value.id))})])])])),l($,{header:"Confirmação",visible:v.value,"onUpdate:visible":e[7]||(e[7]=o=>v.value=o),style:{width:"350px"},modal:!0},{footer:u(()=>[l(i,{label:"Não",icon:"pi pi-times",onClick:D,class:"p-button-text"}),l(i,{label:"Sim",icon:"pi pi-check",onClick:T,class:"p-button-text",autofocus:""})]),default:u(()=>[e[18]||(e[18]=t("div",{class:"flex align-items-center justify-content-center"},[t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),t("span",null,"Tem certeza que deseja apagar esta pergunta?")],-1))]),_:1},8,["visible"])],64)}}};export{fe as default};
