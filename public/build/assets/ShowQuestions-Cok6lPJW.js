import{h as L,s as R}from"./moment-KypWong7.js";import{s as Y}from"./index-DRIfWn4N.js";import{s as F}from"./index-Cdd-lr89.js";import{s as I,a as z}from"./index-BU5Wu_-D.js";import{s as H}from"./index-D_ppWCKI.js";import{s as Q,a as b}from"./index-Deku2UiK.js";import{Q as W,l as u,M as G,c as g,d as t,b as l,f as J,j as p,e as y,t as D,u as K,V as O,F as X,W as Z,o as _}from"./app-BDPRA1pV.js";import"./index-NMEYxfuD.js";import"./index-CbTJAVNw.js";import"./index-Be7kU03h.js";const h={key:0,class:"flex flex-col min-h-screen items-center justify-center"},ee={class:"flex flex-col gap-4 text-center"},le={key:1,class:"flex flex-col gap-12"},te={class:"card flex flex-col gap-4"},oe={class:"flex justify-start"},ae={key:0},se={class:"mt-4"},ie={class:"flex justify-end gap-2 mt-2"},ne={class:"flex justify-end gap-2 mt-2"},ye={__name:"ShowQuestions",setup(ue){const $=Z(),d=W(),v=u(!0),k=u(!1),n=u({}),V=u([]),E=u(null),s=u(null),m=u(!1),f=u(!1),r=u({label:"",value:"",next_question_bot_id:""});function P(){const a={...r.value,question_bot_id:n.value.id};b.post("/api/options",a).then(()=>{d.add({severity:"success",summary:"Sucesso",detail:"Opção adicionada!",life:3e3}),m.value=!1,q(),r.value={label:"",value:"",next_question_bot_id:""}})}function T(){v.value=!0;const a={label:s.value.label,value:s.value.value,next_question_bot_id:s.value.next_question_bot_id,_method:"PUT"};b.post(`/api/options/${s.value.id}`,a).then(()=>{d.add({severity:"success",summary:"Sucesso",detail:"Opção editada!",life:3e3}),f.value=!1,q()}).catch(e=>{d.add({severity:"error",summary:"Erro",detail:"Erro ao editar opção",life:3e3})}).finally(()=>{v.value=!1})}function C(){$.back()}const S=()=>{k.value=!1},U=a=>{s.value=a,f.value=!0},q=async()=>{v.value=!0,b.get(`/api/questions/${$.currentRoute.value.params.id}`).then(a=>{n.value=a.data,v.value=!1}).catch(a=>{v.value=!1,d.add({severity:"error",summary:"Erro",detail:"Não foi possível carregar a pergunta",life:3e3}),C()}),b.get("/api/questions").then(a=>{V.value=a.data.data}).catch(a=>{d.add({severity:"error",summary:"Erro",detail:"Não foi possível carregar as perguntas",life:3e3})})},N=()=>{b.delete(`/api/questions/${E.value}`).then(()=>{d.add({severity:"success",summary:"Sucesso",detail:"Pergunta apagada com sucesso",life:3e3}),S(),C()}).catch(a=>{d.add({severity:"error",summary:"Erro",detail:"Erro ao apagar",life:3e3})})};return G(()=>{q()}),(a,e)=>{const j=Q,i=H,c=I,A=z,x=F,B=Y,w=R;return _(),g(X,null,[v.value?(_(),g("div",h,[l("div",ee,[t(j,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Carregando"}),e[13]||(e[13]=l("p",null,"Por Favor Aguarde...",-1))])])):(_(),g("div",le,[l("div",te,[l("div",oe,[t(i,{label:"Voltar",class:"mr-2 mb-2",onClick:C},{default:p(()=>[...e[14]||(e[14]=[l("i",{class:"pi pi-angle-left"},null,-1),y(" Voltar ",-1)])]),_:1})]),e[25]||(e[25]=l("div",{class:"font-semibold text-xl"},"Detalhes da Pergunta",-1)),l("div",null,[e[15]||(e[15]=l("strong",null,"Pergunta:",-1)),y(" "+D(n.value.text),1)]),l("div",null,[e[16]||(e[16]=l("strong",null,"Tipo:",-1)),y(" "+D(n.value.type==="button"?"Botão":"Texto"),1)]),l("div",null,[e[17]||(e[17]=l("strong",null,"Data de Criação:",-1)),y(" "+D(K(L)(n.value.created_at).format("DD-MM-YYYY HH:mm")),1)]),n.value.options&&n.value.options.length?(_(),g("div",ae,[e[18]||(e[18]=l("div",{class:"font-semibold mt-4 mb-2"},"Opções",-1)),t(A,{value:n.value.options},{default:p(()=>[t(c,{field:"label",header:"Texto do Botão"}),t(c,{field:"value",header:"Valor"}),t(c,{field:"next_question.text",header:"Próxima Pergunta"}),t(c,{header:"Ações"},{body:p(o=>[t(i,{icon:"pi pi-pencil",onClick:M=>U(o.data),class:"m-2"},null,8,["onClick"]),t(i,{icon:"pi pi-trash",onClick:M=>a.deleteOption(o.data.id),class:"m-2"},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])):J("",!0),l("div",se,[t(i,{label:"Adicionar opção",onClick:e[0]||(e[0]=o=>m.value=!0)}),t(w,{header:"Nova Opção",visible:m.value,"onUpdate:visible":e[5]||(e[5]=o=>m.value=o),modal:!0,style:{width:"600px",borderRadius:"12px"}},{default:p(()=>[l("form",{onSubmit:O(P,["prevent"]),class:"flex flex-col gap-4 p-2"},[l("div",null,[e[19]||(e[19]=l("label",{for:"label",class:"font-semibold mb-1 block"},"Texto do Botão",-1)),t(x,{modelValue:r.value.label,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.label=o),id:"label",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[20]||(e[20]=l("label",{for:"value",class:"font-semibold mb-1 block"},"Valor",-1)),t(x,{modelValue:r.value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.value=o),id:"value",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[21]||(e[21]=l("label",{for:"next_question_bot_id",class:"font-semibold mb-1 block"},"Próxima Pergunta",-1)),t(B,{modelValue:r.value.next_question_bot_id,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.next_question_bot_id=o),id:"next_question_bot_id",options:V.value,optionLabel:"text",optionValue:"id",filter:"",placeholder:"Selecione a próxima pergunta",class:"w-full",showClear:""},null,8,["modelValue","options"])]),l("div",ie,[t(i,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:e[4]||(e[4]=o=>m.value=!1)}),t(i,{label:"Salvar",type:"submit",icon:"pi pi-check",severity:"success"})])],32)]),_:1},8,["visible"]),t(w,{header:"Editar Opção",visible:f.value,"onUpdate:visible":e[10]||(e[10]=o=>f.value=o),modal:!0,style:{width:"600px",borderRadius:"12px"}},{default:p(()=>[l("form",{onSubmit:O(T,["prevent"]),class:"flex flex-col gap-4 p-2"},[l("div",null,[e[22]||(e[22]=l("label",{for:"label",class:"font-semibold mb-1 block"},"Texto do Botão",-1)),t(x,{modelValue:s.value.label,"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.label=o),id:"label",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[23]||(e[23]=l("label",{for:"value",class:"font-semibold mb-1 block"},"Valor",-1)),t(x,{modelValue:s.value.value,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.value=o),id:"value",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[24]||(e[24]=l("label",{for:"next_question_bot_id",class:"font-semibold mb-1 block"},"Próxima Pergunta",-1)),t(B,{modelValue:s.value.next_question_bot_id,"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.next_question_bot_id=o),id:"next_question_bot_id",options:V.value,optionLabel:"text",optionValue:"id",filter:"",placeholder:"Selecione a próxima pergunta",class:"w-full",showClear:""},null,8,["modelValue","options"])]),l("div",ne,[t(i,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:e[9]||(e[9]=o=>f.value=!1)}),t(i,{label:"Salvar",type:"submit",icon:"pi pi-check",severity:"success"})])],32)]),_:1},8,["visible"])]),l("div",null,[t(i,{label:"Apagar",icon:"pi pi-trash",severity:"danger",onClick:e[11]||(e[11]=o=>a.confirmDeletion(n.value.id))})])])])),t(w,{header:"Confirmação",visible:k.value,"onUpdate:visible":e[12]||(e[12]=o=>k.value=o),style:{width:"350px"},modal:!0},{footer:p(()=>[t(i,{label:"Não",icon:"pi pi-times",onClick:S,class:"p-button-text"}),t(i,{label:"Sim",icon:"pi pi-check",onClick:N,class:"p-button-text",autofocus:""})]),default:p(()=>[e[26]||(e[26]=l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Tem certeza que deseja apagar esta pergunta?")],-1))]),_:1},8,["visible"])],64)}}};export{ye as default};
