import{a as D,s as I}from"./index-Bb_4tGAF.js";import{s as N}from"./index-k8S3BKyS.js";import{s as U}from"./index-QPnfdlOn.js";import{s as q}from"./index-BMU10jgj.js";import{s as A}from"./index-Bq2npM-B.js";import{Q as F,l as L,W as O,c as Q,b as t,d as l,j as R,e as W,u as s,i as j,f as z,J as _,X as m,t as k,o as S}from"./app-DeRpOroz.js";import{c as J,a as C,b as T,u as X}from"./index.esm-rP2rbknf.js";import"./index-9x5Dav86.js";const G={class:"card flex flex-col gap-4"},H={class:"w-full"},K={class:"flex flex-col gap-2"},M={class:"p-error"},Y={class:"flex flex-col gap-2"},Z={class:"p-error"},h={class:"flex items-center gap-2"},ee={class:"flex items-center gap-2"},de={__name:"CreateQuestions",setup(te){const g=O(),V=F(),o=L(!1),$=[{label:"Texto",value:"text"},{label:"Botão",value:"button"}],B=J({text:T().required().trim().label("Texto da Pergunta"),type:T().required().label("Tipo"),is_start:C().label("Pergunta Inicial"),active:C().label("Ativa")}),{defineField:n,handleSubmit:P,errors:u,setErrors:E}=X({validationSchema:B}),[c]=n("text"),[f]=n("type"),[v]=n("is_start"),[b]=n("active"),x=P(y=>{o.value=!0,D.post("/api/questions",y).then(()=>{V.add({severity:"success",summary:"Sucesso",detail:"Pergunta criada com sucesso",life:3e3}),g.back()}).catch(e=>{var r,d,p,i;o.value=!1,V.add({severity:"error",summary:"Erro",detail:((d=(r=e.response)==null?void 0:r.data)==null?void 0:d.message)||"Erro ao criar",life:3e3}),(i=(p=e.response)==null?void 0:p.data)!=null&&i.errors&&E(e.response.data.errors)}).finally(()=>{o.value=!1})});return(y,e)=>{const r=A,d=q,p=U,i=N,w=I;return S(),Q("div",G,[t("div",H,[l(r,{label:"Voltar",class:"mr-2 mb-2",onClick:e[0]||(e[0]=a=>s(g).back())},{default:R(()=>[...e[6]||(e[6]=[t("i",{class:"pi pi-angle-left"},null,-1),W(" Voltar",-1)])]),_:1})]),e[11]||(e[11]=t("div",{class:"font-semibold text-xl"},"Adicionar Pergunta",-1)),e[12]||(e[12]=t("small",{class:"p-error"},"Os campos marcados * são obrigatórios.",-1)),t("form",{onSubmit:e[5]||(e[5]=(...a)=>s(x)&&s(x)(...a))},[t("div",K,[e[7]||(e[7]=t("label",{for:"text"},"Texto da Pergunta *",-1)),l(d,{modelValue:s(c),"onUpdate:modelValue":e[1]||(e[1]=a=>m(c)?c.value=a:null),id:"text",placeholder:"Digite a pergunta",class:_({"p-invalid":s(u).text})},null,8,["modelValue","class"]),t("small",M,k(s(u).text),1)]),t("div",Y,[e[8]||(e[8]=t("label",{for:"type"},"Tipo *",-1)),l(p,{modelValue:s(f),"onUpdate:modelValue":e[2]||(e[2]=a=>m(f)?f.value=a:null),id:"type",options:$,optionLabel:"label",optionValue:"value",placeholder:"Selecione o tipo",class:_({"p-invalid":s(u).type})},null,8,["modelValue","class"]),t("small",Z,k(s(u).type),1)]),t("div",h,[l(i,{modelValue:s(v),"onUpdate:modelValue":e[3]||(e[3]=a=>m(v)?v.value=a:null),binary:!0,inputId:"is_start"},null,8,["modelValue"]),e[9]||(e[9]=t("label",{for:"is_start"},"Esta é a pergunta inicial?",-1))]),t("div",ee,[l(i,{modelValue:s(b),"onUpdate:modelValue":e[4]||(e[4]=a=>m(b)?b.value=a:null),binary:!0,inputId:"active"},null,8,["modelValue"]),e[10]||(e[10]=t("label",{for:"active"},"Pergunta ativa?",-1))]),l(r,{label:"Submeter",class:"mt-2",disabled:o.value,onClick:s(x)},null,8,["disabled","onClick"]),o.value?(S(),j(w,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Salvando..."})):z("",!0)],32)])}}};export{de as default};
